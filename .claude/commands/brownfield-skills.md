---
description: Brownfield Developer Skills Generator - Generate "Senior Developer Expert in This Project" Skills for existing projects, enabling AI coding tools to acquire all professional knowledge needed for long-term project maintenance.
handoffs:
  - label: Bootstrap SDD Workflow
    agent: /speckit.brownfield-bootstrap
    prompt: Initialize SDD workflow based on project skills
  - label: Create Feature Spec
    agent: /speckit.specify
    prompt: Create project-compliant feature specifications using project skills
---

## User Input

```text
$ARGUMENTS
```

Before proceeding, you **must** consider the user input (if not empty).

---

# Brownfield Developer Skills Generator

## Overview

This command generates Claude Code Project Skills for **brownfield (existing) projects**. The generated Skills will enable AI coding tools with the following capabilities:

1. **Master This Project**: Deep understanding of the project's tech stack, architecture, layering, and code style
2. **Follow Development Habits**: Work according to existing coding conventions and development patterns
3. **Forward Compatibility**: Maintain compatibility with existing code when extending functionality
4. **Refactor On-Demand**: Only refactor when necessary, avoiding unnecessary changes
5. **Code Reuse First**: Prioritize using existing code, avoid reinventing the wheel

## Supreme Goal (Non-Negotiable)

> **Generate a Project Skills that embodies a senior development engineer who is familiar with this project, has long-term maintenance experience, and is proficient in all tech stacks of the project**

## Critical: Skills Installation Location

> **MANDATORY CONSTRAINT - MUST READ**
>
> Skills generated by this command **must and can only** be installed to:
> ```
> [Project Root]/.claude/skills/brownfield-developer-[project-name]/
> ```
> This is the standard location for Claude Code to automatically load Project Skills.

**Skills Directory Structure**:

```
.claude/skills/brownfield-developer-[project-name]/
├── SKILL.md                    # Skill entry point (core metadata and usage guide)
└── references/
    ├── architecture.md         # Project architecture and layering design
    ├── tech-stack.md           # Tech stack details and version constraints
    ├── coding-conventions.md   # Coding standards and code style
    ├── module-structure.md     # Module structure and responsibility mapping
    └── development-patterns.md # Development patterns and best practices
```

### Pre-Output Mandatory Checklist

**Before outputting any file, verify ALL of the following checks pass:**

| # | Check Item | Correct ✓ | Wrong ✗ | Verification |
|---|------------|-----------|---------|--------------|
| 1 | Skills root | `.claude/skills/` | `skills/` | Must be under .claude |
| 2 | Skill dir naming | `brownfield-developer-[name]` | Other names | Use project name |
| 3 | Entry file | `SKILL.md` | `skill.md` | Uppercase SKILL |
| 4 | References dir | `references/` | `reference/` | Plural form |
| 5 | File completeness | All 5 reference files | Missing any | Check list |

**If any check fails, correct it before outputting**

---

## Execution Flow

### Phase 0: Deep Project Analysis

**Goal**: Understand the project comprehensively, like a senior engineer taking over the project

#### Step 0.1: Tech Stack Identification

**Systematically scan project tech stack**:

1. **Primary Programming Languages**:
   - Identify file extension distribution (.java, .ts, .py, .go, .rs, etc.)
   - Determine language version constraints (package.json engines, pom.xml properties, etc.)
   - Identify if it's a multi-language project

2. **Frameworks and Runtimes**:
   - Web frameworks: Spring Boot, Express, Django, Gin, Actix, etc.
   - Frontend frameworks: React, Vue, Angular, Svelte, etc.
   - Runtimes: Node.js, JVM, Python, Go runtime, etc.

3. **Build Tools and Package Managers**:
   - Build: Maven, Gradle, npm/yarn/pnpm, cargo, go build, etc.
   - Dependency management: Identify config files and lock files

4. **Testing Frameworks**:
   - Unit tests: JUnit, Jest, pytest, go test, etc.
   - Integration tests: Testcontainers, Supertest, etc.
   - E2E tests: Playwright, Cypress, Selenium, etc.

5. **Data Storage**:
   - Databases: MySQL, PostgreSQL, MongoDB, Redis, etc.
   - ORM/ODM: JPA, Prisma, SQLAlchemy, GORM, etc.

6. **Infrastructure**:
   - Containerization: Docker, docker-compose
   - CI/CD: GitHub Actions, GitLab CI, Jenkins, etc.
   - Cloud services: AWS, GCP, Azure, etc.

#### Step 0.2: Architecture Pattern Recognition

**Analyze project architecture style**:

| Pattern | Recognition Features | Key Directories |
|---------|---------------------|-----------------|
| Layered | controller/service/repository | src/main/java/.../controller |
| Onion | domain/application/infrastructure | src/domain, src/infrastructure |
| Hexagonal | ports/adapters | src/adapters, src/ports |
| Microservices | Independent service directories | services/, apps/ |
| Monorepo | Multiple packages coexist | packages/, apps/, libs/ |
| Modular Monolith | Feature-based modules | modules/, features/ |

**Analyze code organization**:
- Layer-first: controllers/, services/, models/
- Feature-first: users/, orders/, payments/
- Hybrid: Identify primary and secondary organization

#### Step 0.3: Coding Conventions Extraction

**Extract actual conventions from config files and code samples**:

1. **Naming Conventions**:
   - File naming: kebab-case, PascalCase, snake_case
   - Variable naming: camelCase, snake_case
   - Class/Interface naming: PascalCase, I-prefix (interfaces)
   - Constants: UPPER_SNAKE_CASE

2. **Code Style**:
   - Indentation: spaces/tabs, count
   - Quotes: single/double
   - Semicolons: use or not
   - Line length limit
   - Import organization

3. **Comment Standards**:
   - Doc comment format: JSDoc, Javadoc, docstring
   - Inline comment style
   - TODO/FIXME conventions

4. **Git Conventions**:
   - Commit message format: Conventional Commits, custom format
   - Branch naming strategy
   - PR/MR templates

#### Step 0.4: Module Structure Analysis

**For multi-module projects, perform detailed analysis**:

1. **Enumerate all modules**:
   ```markdown
   | Module | Path | Type | Responsibility |
   |--------|------|------|----------------|
   | [module] | [path] | [api/service/dao/common] | [description] |
   ```

2. **Analyze module responsibilities**:
   - API/Interface layer: Externally exposed interface definitions
   - Service implementation layer: Business logic implementation
   - Data access layer: Data persistence operations
   - Common utilities layer: Shared utilities and infrastructure

3. **Analyze dependencies**:
   - Draw module dependency graph
   - Identify dependency rules (allowed/forbidden directions)
   - Identify cross-module communication patterns

#### Step 0.5: Development Pattern Recognition

**Identify development patterns and best practices used in the project**:

1. **Design Patterns**:
   - Repository Pattern
   - Service Layer Pattern
   - Factory Pattern
   - Strategy Pattern
   - Other common patterns

2. **Code Organization Patterns**:
   - DTO/VO/Entity separation
   - Interface and implementation separation
   - Configuration externalization
   - Dependency injection

3. **Error Handling Patterns**:
   - Exception hierarchy
   - Unified error response format
   - Error code standards

4. **Logging and Observability**:
   - Logging framework and format
   - Distributed tracing
   - Metrics collection

---

### Phase 1: Generate Skills Files

**Goal**: Transform analysis results into structured Skills files

#### Step 1.1: Create Directory Structure

```bash
mkdir -p .claude/skills/brownfield-developer-[project-name]/references
```

#### Step 1.2: Generate SKILL.md (Entry Point)

Create `.claude/skills/brownfield-developer-[project-name]/SKILL.md`:

```markdown
# [PROJECT_NAME] Developer Skills

## Skill Overview

This skill empowers Claude Code as a **senior development engineer** for the **[PROJECT_NAME]** project. With this skill, Claude Code will:

- Master all tech stacks and architectural design of this project
- Follow project coding conventions and development habits
- Prioritize code reuse, avoid reinventing the wheel
- Maintain forward compatibility when extending functionality
- Refactor on-demand, avoiding unnecessary changes

## Key Skills Checklist

### 1. Tech Stack Mastery
- **Primary Language**: [language and version]
- **Core Frameworks**: [framework list]
- **Details**: See [references/tech-stack.md](references/tech-stack.md)

### 2. Architecture Understanding
- **Architecture Style**: [pattern]
- **Layering Structure**: [description]
- **Details**: See [references/architecture.md](references/architecture.md)

### 3. Coding Conventions
- **Naming Conventions**: [main conventions]
- **Code Style**: [tools/config]
- **Details**: See [references/coding-conventions.md](references/coding-conventions.md)

### 4. Module Structure
- **Project Type**: [monolith/multi-module/microservices]
- **Module Count**: [N]
- **Details**: See [references/module-structure.md](references/module-structure.md)

### 5. Development Patterns
- **Design Patterns**: [common patterns]
- **Best Practices**: [key practices]
- **Details**: See [references/development-patterns.md](references/development-patterns.md)

## Brownfield Development Principles

### Principle 1: Respect Existing Architecture
> **Don't try to "improve" existing architecture; understand and follow it accurately**

- New code must be consistent with existing architecture style
- Architecture changes require sufficient justification

### Principle 2: Code Reuse First
> **Before creating new code, search for existing implementations**

Execution order:
1. Search for similar functionality in the project
2. Check common/utils/shared modules
3. Create new code only after confirming no reusable code exists

### Principle 3: Forward Compatibility
> **New features must not break existing functionality**

- Add rather than modify (Open/Closed Principle)
- Maintain backward compatibility of existing APIs
- Thorough regression testing

### Principle 4: Refactor On-Demand
> **Only refactor when necessary, avoid over-engineering**

Refactoring triggers:
- Impacts new feature implementation
- Obvious code smells exist
- User explicitly requests

### Principle 5: Compatibility First
> **All generated code must be consistent with existing code style**

- Use the same naming conventions
- Use the same code format
- Use the same directory structure

## Usage Guide

### When Developing New Features

1. **Read relevant reference files** first to understand project conventions
2. **Search existing implementations** to confirm reusable code
3. **Follow module structure** to place code in correct locations
4. **Follow coding conventions** to maintain style consistency
5. **Write tests** using the project's testing framework

### When Understanding Existing Code

Use Repomix to generate or update skills:
```bash
repomix --skill-generate
```

### When Modifying Existing Code

1. **Understand impact scope**: Confirm which modules are affected
2. **Maintain compatibility**: Ensure existing functionality is not broken
3. **Test thoroughly**: Run related tests to confirm no regressions

## Reference Files

| File | Description |
|------|-------------|
| [architecture.md](references/architecture.md) | Project architecture and layering |
| [tech-stack.md](references/tech-stack.md) | Tech stack details and constraints |
| [coding-conventions.md](references/coding-conventions.md) | Coding standards and style |
| [module-structure.md](references/module-structure.md) | Module structure and responsibilities |
| [development-patterns.md](references/development-patterns.md) | Development patterns and practices |

---

**Version**: 1.0.0 | **Generated**: [DATE] | **Source**: Brownfield Developer Skills Generator
```

#### Step 1.3: Generate architecture.md

Create `.claude/skills/brownfield-developer-[project-name]/references/architecture.md`:

```markdown
# [PROJECT_NAME] Architecture

## Architecture Style

**Primary Architecture Pattern**: [Layered/Onion/Hexagonal/Microservices/...]

**Architecture Diagram**:
```
[Draw diagram based on actual architecture]
```

## Layer Structure

### [Layer 1 Name]
- **Responsibility**: [description]
- **Location**: [directory path]
- **Typical Components**: [component types]

### [Layer 2 Name]
- **Responsibility**: [description]
- **Location**: [directory path]
- **Typical Components**: [component types]

[Continue for all layers...]

## Dependency Rules

### Allowed Dependencies
- [Upper Layer] → [Lower Layer]
- Example: Controller → Service → Repository

### Forbidden Dependencies
- [Lower Layer] → [Upper Layer]
- Circular dependencies

## Key Architecture Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| [Decision 1] | [Choice] | [Rationale] |
| [Decision 2] | [Choice] | [Rationale] |

## Extension Guidelines

### Adding New Features
1. [Step 1]
2. [Step 2]
3. [Step 3]

### Adding New Modules
1. [Step 1]
2. [Step 2]
3. [Step 3]
```

#### Step 1.4: Generate tech-stack.md

Create `.claude/skills/brownfield-developer-[project-name]/references/tech-stack.md`:

```markdown
# [PROJECT_NAME] Tech Stack

## Core Tech Stack (Locked)

> These technologies are determined by the project. New code must use the same stack.

| Category | Technology | Version | Notes |
|----------|------------|---------|-------|
| **Language** | [language] | [version] | [notes] |
| **Runtime** | [runtime] | [version] | [notes] |
| **Framework** | [framework] | [version] | [notes] |
| **Build Tool** | [tool] | [version] | [notes] |
| **Test Framework** | [framework] | [version] | [notes] |

## Dependency Details

### Production Dependencies
| Dependency | Version | Purpose |
|------------|---------|---------|
| [dep 1] | [version] | [purpose] |
| [dep 2] | [version] | [purpose] |

### Development Dependencies
| Dependency | Version | Purpose |
|------------|---------|---------|
| [dep 1] | [version] | [purpose] |
| [dep 2] | [version] | [purpose] |

## Data Storage

| Type | Technology | Purpose |
|------|------------|---------|
| Primary DB | [database] | [purpose] |
| Cache | [cache tech] | [purpose] |
| Message Queue | [MQ tech] | [purpose] |

## Infrastructure

| Category | Technology | Config File |
|----------|------------|-------------|
| Containerization | [Docker/etc] | [file path] |
| CI/CD | [tool] | [config path] |
| Deployment | [platform] | [config path] |

## Version Constraints

### Must Follow
- [constraint 1]
- [constraint 2]

### Upgrade Guidelines
- Before upgrade: [action]
- After upgrade: [verification]
```

#### Step 1.5: Generate coding-conventions.md

Create `.claude/skills/brownfield-developer-[project-name]/references/coding-conventions.md`:

```markdown
# [PROJECT_NAME] Coding Conventions

## Naming Conventions

### File Naming
| Type | Convention | Example |
|------|------------|---------|
| Component files | [convention] | [example] |
| Service files | [convention] | [example] |
| Test files | [convention] | [example] |
| Config files | [convention] | [example] |

### Code Naming
| Type | Convention | Example |
|------|------------|---------|
| Class/Interface | PascalCase | UserService |
| Method/Function | camelCase/snake_case | getUserById |
| Variable | camelCase/snake_case | userId |
| Constant | UPPER_SNAKE_CASE | MAX_RETRY_COUNT |
| Private member | [convention] | [example] |

## Code Formatting

### Tool Configuration
- **Formatter**: [tool name]
- **Config file**: [config path]
- **Run command**: [command]

### Format Rules
- **Indentation**: [spaces/tabs]
- **Line length**: [max chars]
- **Quotes**: [single/double]
- **Semicolons**: [yes/no]
- **Trailing commas**: [yes/no]

### Import Organization
1. [Group 1: e.g., standard library]
2. [Group 2: e.g., third-party]
3. [Group 3: e.g., internal modules]

## Comment Standards

### Documentation Comments
```[language]
[doc comment example]
```

### Inline Comments
- [rule 1]
- [rule 2]

### TODO/FIXME
- TODO: [format]
- FIXME: [format]

## Git Conventions

### Commit Message Format
```
[format template]
```

### Commit Types
| Type | Description |
|------|-------------|
| feat | New feature |
| fix | Bug fix |
| docs | Documentation |
| [other] | [description] |

### Branch Naming
- Feature branch: [format]
- Fix branch: [format]
- Release branch: [format]

## Code Quality Tools

| Tool | Purpose | Config | Command |
|------|---------|--------|---------|
| [Linter] | Code linting | [config] | [command] |
| [Formatter] | Formatting | [config] | [command] |
| [TypeChecker] | Type checking | [config] | [command] |
```

#### Step 1.6: Generate module-structure.md

Create `.claude/skills/brownfield-developer-[project-name]/references/module-structure.md`:

```markdown
# [PROJECT_NAME] Module Structure

## Project Type

**Structure Type**: [Monolith/Multi-module/Monorepo/Microservices]
**Module Count**: [N]

## Module List

| Module | Path | Category | Responsibility |
|--------|------|----------|----------------|
| [module 1] | [path] | [category] | [description] |
| [module 2] | [path] | [category] | [description] |

## Module Details

### [Module 1 Name]
- **Path**: [full path]
- **Responsibility**: [detailed description]
- **Allowed Code Types**:
  - [type 1]
  - [type 2]
- **Directory Structure**:
  ```
  [internal structure]
  ```

### [Module 2 Name]
[Same format...]

## Module Dependencies

### Dependency Graph
```
[app/boot]
├── [service-module-1]
│   ├── [api-module-1]
│   └── [common]
├── [service-module-2]
│   ├── [api-module-2]
│   └── [common]
└── [common]
```

### Dependency Rules
- **Allowed**: [rule description]
- **Forbidden**: [rule description]
- **Cross-module**: [communication method]

## Code Placement Decision Tree

### New Feature Code Placement Guide

```
Is it an externally exposed interface/DTO?
├── Yes → [api module]
└── No → Is it business logic/service implementation?
    ├── Yes → [service module]
    └── No → Is it database entity/data access?
        ├── Yes → [dao module]
        └── No → Is it a cross-module shared utility?
            ├── Yes → [common module]
            └── No → Consult architect or create new module
```

### Code Type Quick Reference

| Code Type | Target Module | Target Path |
|-----------|---------------|-------------|
| REST API endpoint | [module] | [path] |
| Service interface | [module] | [path] |
| Service impl | [module] | [path] |
| Database Entity | [module] | [path] |
| DTO/VO | [module] | [path] |
| Utility class | [module] | [path] |
| Config class | [module] | [path] |
| Test code | [module] | [path] |
```

#### Step 1.7: Generate development-patterns.md

Create `.claude/skills/brownfield-developer-[project-name]/references/development-patterns.md`:

```markdown
# [PROJECT_NAME] Development Patterns

## Design Patterns

### Common Patterns List

| Pattern | Purpose | Example |
|---------|---------|---------|
| Repository Pattern | Data access abstraction | [example class] |
| Service Layer | Business logic encapsulation | [example class] |
| Factory Pattern | Object creation | [example class] |
| [other patterns] | [purpose] | [example] |

### Pattern Usage Guide

#### Repository Pattern
```[language]
[code example]
```

#### Service Layer
```[language]
[code example]
```

## Code Organization Patterns

### DTO/VO/Entity Separation
- **Entity**: [description and location]
- **DTO**: [description and location]
- **VO**: [description and location]

### Interface and Implementation Separation
- Interface location: [path]
- Implementation location: [path]
- Naming convention: [convention]

## Error Handling Patterns

### Exception Hierarchy
```
BaseException
├── BusinessException
│   ├── [specific business exception]
│   └── [specific business exception]
└── SystemException
    ├── [specific system exception]
    └── [specific system exception]
```

### Unified Error Response Format
```[language]
[error response example]
```

### Error Code Standards
| Range | Type | Example |
|-------|------|---------|
| [range 1] | [type] | [example] |
| [range 2] | [type] | [example] |

## Logging Standards

### Logging Framework
- **Framework**: [name]
- **Config**: [config file path]

### Log Format
```
[log format example]
```

### Log Level Usage
| Level | Use Case |
|-------|----------|
| ERROR | [scenario] |
| WARN | [scenario] |
| INFO | [scenario] |
| DEBUG | [scenario] |

## Testing Patterns

### Test Structure
```
[test directory structure]
```

### Unit Test Pattern
```[language]
[unit test example]
```

### Integration Test Pattern
```[language]
[integration test example]
```

### Mocking Standards
- Mock framework: [name]
- Mock scope: [rules]

## Configuration Management

### Config File Structure
```
[config file list]
```

### Environment Configuration
| Environment | Config File | Notes |
|-------------|-------------|-------|
| Development | [file] | [notes] |
| Test | [file] | [notes] |
| Production | [file] | [notes] |

### Sensitive Config Handling
- [rule 1]
- [rule 2]
```

---

### Phase 2: Skills Installation & Validation

**Goal**: Ensure Skills are correctly installed and can be loaded by Claude Code

#### Step 2.1: Installation Verification

**Verify Skills directory structure**:

```bash
# Check directory structure
ls -la .claude/skills/brownfield-developer-[project-name]/
ls -la .claude/skills/brownfield-developer-[project-name]/references/
```

**Verify required files exist**:

| File | Path | Status |
|------|------|--------|
| Skill entry | `.claude/skills/brownfield-developer-[name]/SKILL.md` | ✓/✗ |
| Architecture | `.../references/architecture.md` | ✓/✗ |
| Tech stack | `.../references/tech-stack.md` | ✓/✗ |
| Coding conventions | `.../references/coding-conventions.md` | ✓/✗ |
| Module structure | `.../references/module-structure.md` | ✓/✗ |
| Dev patterns | `.../references/development-patterns.md` | ✓/✗ |

#### Step 2.2: Idempotency Verification

**Confirm repeated execution produces consistent results**:

This command supports repeated execution:
- Each run analyzes the project's **current state**
- All Skills files are **completely overwritten**
- No need to manually delete old files

**Version control**:
- Generation date in SKILL.md is updated
- Recommend adding `.claude/skills/` to version control
- Team members can share project skills

#### Step 2.3: Generate Completion Report

```markdown
## Skills Generation Complete Report

**Project**: [project name]
**Generated**: [datetime]
**Status**: ✅ Success

### Generated Files

| File | Path | Status |
|------|------|--------|
| SKILL.md | `.claude/skills/brownfield-developer-[name]/SKILL.md` | ✅ |
| architecture.md | `.../references/architecture.md` | ✅ |
| tech-stack.md | `.../references/tech-stack.md` | ✅ |
| coding-conventions.md | `.../references/coding-conventions.md` | ✅ |
| module-structure.md | `.../references/module-structure.md` | ✅ |
| development-patterns.md | `.../references/development-patterns.md` | ✅ |

### Skills Summary

**Tech Stack**: [main tech stack]
**Architecture**: [style]
**Modules**: [N]

### Verification Results

- [x] Skills directory structure correct
- [x] All required files generated
- [x] SKILL.md entry file valid
- [x] Reference file links correct

### Next Steps

1. **Verify Skills loading**: Restart Claude Code or refresh session
2. **Test skill effectiveness**: Try asking project-related questions
3. **Keep in sync**: Re-run this tool after major project changes

### Suggested Commands

```bash
# Verify Skills installed
ls .claude/skills/

# If using SDD workflow, continue bootstrap
/speckit.brownfield-bootstrap

# Start development directly
# Claude Code will automatically use project skills
```
```

---

## General Guidelines

### Brownfield Project Considerations

1. **Respect Existing Architecture**: Skills should accurately reflect current state, not "improve" it
2. **Tech Stack Lock**: Project technology choices are established facts; Skills must anchor to them
3. **Compatibility First**: All code guided by Skills must match existing code style
4. **No Code Duplication**: Skills must emphasize code reuse principles
5. **Understand Existing Code**: Recommend using with Repomix for enhanced code understanding

### Handling Uncertainty

When conventions cannot be determined from code:

1. **Use Industry Standards**: Based on tech stack best practices
2. **Mark for Clarification**: Use `[NEEDS CLARIFICATION: description]`
3. **Limit Count**: Maximum 3 items needing clarification
4. **Provide Options**: Suggest 2-3 options for each uncertain item

### Integration with Repomix

This command complements Repomix:

| Tool | Focus | Output |
|------|-------|--------|
| Brownfield Skills Generator | Development skills and conventions | Structured development guides |
| `repomix --skill-generate` | Code content and structure | Code snapshots and indexes |

**Recommended Workflow**:
1. Run `repomix --skill-generate` first to generate code snapshots
2. Then run Brownfield Skills Generator to generate development skills
3. Together they provide complete project understanding

### Error Handling

| Scenario | Handling |
|----------|----------|
| Cannot identify project type | Ask user to confirm main tech stack |
| Unusual directory structure | Use best guess and mark uncertain items |
| Multi-language project | Identify main language, list all languages |
| Minimal project | Generate basic Skills, mark extensible items |

---

## Context

{ARGS}
